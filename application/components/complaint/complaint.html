<div id="complaints" class="features-block-wrapper">
    <head-component></head-component>
    <div class="bottom-menu">
        <navbar></navbar>
        <h2>Оставьте свой отзыв о заведениях Вашего город</h2>
    </div>
    <div id="home-page">
        <div class="restaurants-block">
            <div class="container hidden-xs">
                <div class="breadcrumbs">
                    <ul>
                        <li><a ng-href="/">Главная</a></li>
                        <li><a ng-href="complaints" class="current">Книга жалоб и предложений</a></li>
                    </ul>
                </div>
            </div>
            <div class="mobile-holder visible-xs">
                <div class="breadcrumbs">
                    <ul>
                        <li><a ng-href="/">Главная</a></li>
                        <li><a ng-href="complaints" class="current">Книга жалоб и предложений</a></li>
                    </ul>
                </div>
                <div class="dropdown drop-option">
                    <h3>КНИГА ОТЗЫВОВ</h3>
                    <a data-toggle="dropdown" href="#"></a>
                    <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                        <div class="menu-two">
                            <li><a ng-href="restaurants">РЕСТОРАНЫ</a></li>
                            <li><a ng-href="delivery">ДОСТАВКА ЕДЫ</a></li>
                            <li><a ng-href="complaints">КНИГА ЖАЛОБ И ПРЕДЛОЖЕНИЙ </a></li>
                            <li><a ng-href="dinner">ОБЕДЫ</a></li>
                            <li><a ng-href="special-proposal">СПЕЦПРЕДЛОЖЕНИЯ</a></li>
                            <li><a ng-href="cooking-boss">БЛЮДО ОТ ШЕФ ПОВАРА</a></li>
                            <li><a ng-href="top50">ТОП 50</a></li>
                        </div>
                    </ul>
                </div>
            </div>
            <div class="container">
                <div class="wrapper">
                    <h3 class="hidden-xs">КНИГА ЖАЛОБ И ПРЕДЛОЖЕНИЙ</h3>
                    <button ng-init="ctrl.hideFilter = false" ng-click="ctrl.hideFilter = !ctrl.hideFilter"
                            class="write-testimonial">НАПИСАТЬ ОТЗЫВ
                    </button>
                </div>
            </div>

            <div ng-show="ctrl.hideFilter" class="container">
                <div class="write-recal" style="display: block;">
                    <div class="answer-user-block ">
                        <form ng-submit="ctrl.addComment(title, message)">
                            <textarea ng-model="title" name="title" class="title">Заглавие</textarea>
                            <textarea ng-model="message" name="message" class="message-testimonial"></textarea>
                            <div class="buttons">
                                <button type="button" data-toggle="modal" data-target=".download-photo-modal"
                                        class="add-foto">
                                    ДОБАВИТЬ ИЗОБРАЖЕНИЯ
                                </button>
                                <button type="submit">ДОБАВИТЬ</button>
                                <button ng-click="ctrl.hideFilter = !ctrl.hideFilter" type="reset" class="cansel">
                                    ОТМЕНА
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <div class="container">

                <div class="start-content "
                     ng-repeat="complaint in ctrl.complaints | startFrom:ctrl.pagination.currentPage*ctrl.pagination.pageSize | limitTo:ctrl.pagination.pageSize"
                     emit-last-repeater-element>
                    <div class="wrapper-mobile-card" style="margin-bottom: 25px;">
                        <div class="item-topic-block">
                            <div class="row row-eq-height item-topic extended">
                                <div class="col-md-4 col-lg-4 col-sm-5 hidden-xs">
                                    <div class="parameter">
                                        <div class="row">
                                            <div class="col-md-5 col-sm-6">
                                                <img src="{{complaint.user.image}}" alt="{{complaint.user.name}}"
                                                     class="photo user">
                                            </div>
                                            <div class="col-md-7 col-sm-6 data-right">
                                                <div class="number">{{complaint.due_date}}</div>
                                                <div class="name">{{complaint.user.name}}</div>
                                                <div class="rate-user">{{complaint.user.user_status}}</div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-5 col-sm-6">
                                                <a href="#" class="attendance">{{complaint.user.visit}} посещений</a>
                                                <a href="#" class="order">{{complaint.user.count_order}} заказа</a>
                                            </div>
                                            <div class="col-md-7 col-sm-6">
                                                <a href="#" class="count-testimonial">{{complaint.user.count_recall}}
                                                    отзыва</a>
                                                <a href="#" class="thanks">{{complaint.user.thanks}} благодарность</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-8 col-lg-8 col-sm-7">

                                    <div class="mobile-profile visible-xs">
                                        <img src="{{complaint.user.image}}" alt="{{complaint.user.name}}">
                                        <div class="parameter">
                                            <div class="number">{{complaint.due_date}}</div>
                                            <div class="name">{{complaint.user.name}}</div>
                                            <div class="rate-user">{{complaint.user.user_status}}</div>
                                            <div class="features">
                                                <a href="#" class="attendance">{{complaint.user.visit}} </a>
                                                <a href="#" class="order">{{complaint.user.count_order}} </a>
                                                <a href="#" class="count-testimonial"> </a>
                                                <a href="#" class="thanks">{{complaint.user.thanks}} </a>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="right-block">
                                        <div class="text">
                                            <a href="#">“{{complaint.title}}”</a>
                                            <div ng-show="complaint.images" class="img-wrapper hidden-xs">
                                                <img ng-repeat="img in complaint.images" src="{{img}}" alt="" class="">
                                            </div>
                                            <div ng-show="complaint.images" class="img-wrapper visible-xs responsive slick-initialized slick-slider">
                                                <slick slides-to-show="3" responsive="special.slickConfig.responsive"
                                                       settings="special.slickConfig">
                                                    <div ng-repeat="img in complaint.images" class="restaurant-menu-block slick-slide slick-active" aria-hidden="false" data-slick-index="0" style="width: 0px;">
                                                        <div class="restaurant-menu">
                                                            <img src="{{img}}"
                                                                 alt="restaurants-menu">
                                                        </div>
                                                    </div>
                                                </slick>
                                            </div>
                                            <div ng-show="!complaint.images" class="wrapper-text">
                                                {{complaint.text}}
                                            </div>
                                            <button ng-show="!complaint.images" class="read-all hidden-lg">Читать далее...</button>
                                            <button ng-show="!complaint.images" class="turn hidden-lg">Свернуть</button>
                                        </div>
                                        <div ng-show="!complaint.images" class="function-user-wrapper">
                                            <div class="function-user desktop visible-sm visible-md">
                                                <div class="networks">
                                                    <ul>
                                                        <li><a href="#" class="facebook">facebook</a></li>
                                                        <li><a href="#" class="twitter">twitter</a></li>
                                                        <li><a href="#" class="vkontakte">vkontakte</a></li>
                                                        <li><a href="#" class="google">google</a></li>
                                                    </ul>
                                                </div>
                                                <div class="evaluation">
                                                    <a href="#" class="good">{{complaint.likes}}</a>
                                                    <a href="#" class="bad">{{complaint.dislikes}}</a>
                                                </div>
                                            </div>
                                            <div class="function-user">
                                                <button class="read-more hidden-xs">Читать полностью</button>
                                                <button class="write-comment">Комментарии({{complaint.children.length}})</button>
                                                <button class="ask">Ответить</button>
                                                <div class="networks hidden-sm hidden-md">
                                                    <ul>
                                                        <li><a href="#" class="facebook">facebook</a></li>
                                                        <li><a href="#" class="twitter">twitter</a></li>
                                                        <li><a href="#" class="vkontakte">vkontakte</a></li>
                                                        <li><a href="#" class="google">google</a></li>
                                                    </ul>
                                                </div>
                                                <div class="evaluation hidden-sm hidden-md">
                                                    <a href="#" class="good">{{complaint.likes}}</a>
                                                    <a href="#" class="bad">{{complaint.dislikes}}</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </div>

                            </div>
                            <div class="row" ng-hide="!complaint.images">
                                <div class="col-md-12">
                                    <div class="text-bottom">
                                        <div class="wrapper-text active">
                                            <div class="wrapper-text-extended">
                                                <p>{{complaint.text}}</p>
                                            </div>
                                        </div>
                                        <button class="read-all hidden-lg" style="display: none;">Читать далее...
                                        </button>
                                        <button class="turn hidden-lg" style="display: inline-block;">Свернуть</button>
                                    </div>
                                </div>
                                <div class="col-md-12">
                                    <div class="bottom-features" style="margin-top: -1px;">
                                        <div class="function-user-wrapper">
                                            <div class="function-user">
                                                <button class="hide-comment hidden-xs">Читать полностью</button>
                                                <button class="write-comment">Комментарии({{complaint.chidlren.length}})</button>
                                                <button class="ask extended">Ответить</button>
                                                <div class="networks">
                                                    <ul>
                                                        <li><a href="#" class="facebook">facebook</a></li>
                                                        <li><a href="#" class="twitter">twitter</a></li>
                                                        <li><a href="#" class="vkontakte">vkontakte</a></li>
                                                        <li><a href="#" class="google">google</a></li>
                                                    </ul>
                                                </div>
                                                <div class="evaluation">
                                                    <a href="#" class="good">{{complaint.likes}}</a>
                                                    <a href="#" class="bad">{{complaint.dislikes}}</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="answer-user-block-show" style="display: none;">
                                <div class="col-md-11 col-md-offset-1 answer-user-block">
                                    <form ng-submit="ctrl.addComment(title, message, complaint.id)">
                                        <textarea ng-model="title" name="title" class="title">Заглавие</textarea>
                                        <textarea ng-model="message" name="message" class="message"
                                                  style="color: rgb(77, 104, 143);" >{{complaint.name}}, </textarea>
                                        <div class="buttons">
                                            <button class="add-foto" type="button" data-toggle="modal"
                                                    data-target=".download-photo-modal">
                                                ДОБАВИТЬ ИЗОБРАЖЕНИЯ
                                            </button>
                                            <button type="submit">ДОБАВИТЬ</button>
                                            <button type="reset" class="cansel">ОТМЕНА</button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div ng-repeat="children in complaint.children" class="item-topic-block childrens">
                        <div class="row">
                            <div class="col-md-11 col-md-offset-1 col-sm-11 col-sm-offset-1">
                                <div class="item-topic answer" style="display: none;">
                                    <div class="row row-eq-height">
                                        <div class="col-md-4 col-sm-5 col-lg-4 hidden-xs">
                                            <div class="parameter">
                                                <div class="row">
                                                    <div class="col-md-5 col-sm-5">
                                                        <img src="{{children.image}}" alt="{{children.user.name}}"
                                                             class="photo user">
                                                    </div>
                                                    <div class="col-md-7 col-sm-7 ">
                                                        <div class="wrapper">
                                                            <div class="number">{{children.due_date}}</div>
                                                            <div class="name">{{children.user.name}}</div>
                                                            <div class="rate-user">{{children.user.user_status}}</div>
                                                        </div>
                                                        <a href="#" class="attendance">{{children.user.count_visit ||
                                                            0}} </a>
                                                        <a href="#" class="order">{{children.user.count_order ||
                                                            0}} </a>
                                                        <a href="#" class="count-testimonial">{{children.user.count_recall
                                                            || 0}} </a>
                                                        <a href="#" class="thanks">{{children.user.thanks || 0}} </a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-8 col-sm-7 col-lg-8">
                                            <div class="wrapper-mobile-card">
                                                <div class="mobile-profile visible-xs">
                                                    <img src="{{children.user.image}}" alt="user-foto-1">
                                                    <div class="parameter">
                                                        <div class="number">{{children.due_date}}</div>
                                                        <div class="name">{{children.user.name}}</div>
                                                        <div class="rate-user">{{children.user.user_status}}</div>
                                                        <div class="features">
                                                            <a href="#" class="attendance">{{children.user.count_visit
                                                                || 0}} </a>
                                                            <a href="#" class="order">{{children.user.count_order ||
                                                                0}} </a>
                                                            <a href="#" class="count-testimonial">{{children.user.count_recall
                                                                || 0}} </a>
                                                            <a href="#" class="thanks">{{children.user.thanks ||
                                                                0}} </a>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="right-block">
                                                    <div class="text">
                                                        <a href="#">“{{children.title}}”</a>
                                                        <div ng-show="children.images" class="img-wrapper hidden-xs">
                                                            <img ng-repeat="img in children.images" src="{{img}}" alt="" class="">
                                                        </div>
                                                        <div ng-show="children.images" class="img-wrapper visible-xs responsive slick-initialized slick-slider">
                                                            <slick slides-to-show="3" responsive="special.slickConfig.responsive"
                                                                   settings="special.slickConfig">
                                                                <div ng-repeat="img in children.images" class="restaurant-menu-block slick-slide slick-active" aria-hidden="false" data-slick-index="0" style="width: 0px;">
                                                                    <div class="restaurant-menu">
                                                                        <img src="{{img}}"
                                                                             alt="restaurants-menu">
                                                                    </div>
                                                                </div>
                                                            </slick>
                                                        </div>
                                                        <div ng-show="!children.images" class="wrapper-text-answer">
                                                            {{children.text}}
                                                        </div>
                                                        <button ng-show="!children.images" class="read-all">Читать далее...</button>
                                                        <button ng-show="!children.images" class="turn hidden-lg">Свернуть</button>
                                                    </div>
                                                    <div ng-show="!children.images" class="function-user">
                                                        <div class="function-user desktop visible-sm visible-md">
                                                            <div class="networks">
                                                                <ul>
                                                                    <li><a href="#" class="facebook">facebook</a></li>
                                                                    <li><a href="#" class="twitter">twitter</a></li>
                                                                    <li><a href="#" class="vkontakte">vkontakte</a></li>
                                                                    <li><a href="#" class="google">google</a></li>
                                                                </ul>
                                                            </div>
                                                            <div class="evaluation">
                                                                <a href="#" class="good">{{children.likes}}</a>
                                                                <a href="#" class="bad">{{children.dislikes}}</a>
                                                            </div>
                                                        </div>
                                                        <div>
                                                            <button class="ask">Ответить</button>
                                                            <div class="networks ">
                                                                <ul>
                                                                    <li><a href="#" class="facebook">facebook</a></li>
                                                                    <li><a href="#" class="twitter">twitter</a></li>
                                                                    <li><a href="#" class="vkontakte">vkontakte</a></li>
                                                                    <li><a href="#" class="google">google</a></li>
                                                                </ul>
                                                            </div>
                                                            <div class="evaluation ">
                                                                <a href="#" class="good">{{children.likes || 0}}</a>
                                                                <a href="#" class="bad">{{children.dislikes || 0}}</a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row" ng-hide="!children.images">
                                        <div class="col-md-12">
                                            <div class="text-bottom">
                                                <div class="wrapper-text active">
                                                    <div class="wrapper-text-extended">
                                                        <p>{{children.text}}</p>
                                                    </div>
                                                </div>
                                                <button class="read-all hidden-lg" style="display: none;">Читать далее...</button>
                                                <button class="turn hidden-lg" style="display: inline-block;">Свернуть</button>
                                            </div>
                                        </div>
                                        <div class="col-md-12">
                                            <div class="bottom-features" style="margin-top: -1px;">
                                                <div class="function-user-wrapper">
                                                    <div class="function-user">
                                                        <button class="hide-comment ">Читать полностью</button>
                                                        <button class="ask extended">Ответить</button>
                                                        <div class="networks">
                                                            <ul>
                                                                <li><a href="#" class="facebook">facebook</a></li>
                                                                <li><a href="#" class="twitter">twitter</a></li>
                                                                <li><a href="#" class="vkontakte">vkontakte</a></li>
                                                                <li><a href="#" class="google">google</a></li>
                                                            </ul>
                                                        </div>
                                                        <div class="evaluation">
                                                            <a href="#" class="good">{{children.likes || 0}}</a>
                                                            <a href="#" class="bad">{{children.dislikes || 0}}</a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="answer-user-block-show" style="display: none;">
                                    <div class="col-md-11 answer-user-block">
                                        <form ng-submit="ctrl.addComment(title, message, complaint.id)">
                                            <textarea ng-model="title" name="title" class="title">Заглавие</textarea>
                                            <textarea ng-model="message" name="message" class="message"
                                                      style="color: rgb(77, 104, 143);" >{{children.name}}, </textarea>
                                            <div class="buttons">
                                                <button class="add-foto" type="button" data-toggle="modal"
                                                        data-target=".download-photo-modal">
                                                    ДОБАВИТЬ ИЗОБРАЖЕНИЯ
                                                </button>
                                                <button type="submit">ДОБАВИТЬ</button>
                                                <button type="reset" class="cansel">ОТМЕНА</button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="write-recal">
                    <div class="answer-user-block ">
                        <form ng-submit="ctrl.addComment(title, message)">
                            <textarea ng-model="title" name="title" class="title">Заглавие</textarea>
                            <textarea ng-model="message" name="message" class="message-testimonial"></textarea>
                            <div class="buttons">
                                <button type="button" data-toggle="modal" data-target=".download-photo-modal"
                                        class="add-foto">
                                    ДОБАВИТЬ ИЗОБРАЖЕНИЯ
                                </button>
                                <button type="submit">ДОБАВИТЬ</button>
                                <button type="reset" class="cansel">ОТМЕНА</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <div class="container">
            <div class="page-block desctop">
                <ul>
                    <li>
                        <button ng-disabled="ctrl.pagination.currentPage == 0"
                                ng-click="ctrl.pagination.currentPage = ctrl.pagination.currentPage-1" href="#"
                                class="prev">НАЗАД
                        </button>
                    </li>
                    <li ng-repeat="page in ctrl.pagination.na(ctrl.pagination.numberOfPages()) | limitTo:4"><a href="#"
                                                                                                               ng-class="ctrl.pagination.currentPage == page ? 'active-page' : 'sibling-page'"
                                                                                                               ng-click="ctrl.pagination.currentPage=page">{{page
                        + 1}}</a></li>
                    <li><a href="#" class="other-page">...</a></li>
                    <li><a href="#" class="last-page"
                           ng-click="ctrl.pagination.currentPage = ctrl.pagination.getLastPage()">{{ctrl.pagination.getLastPage()
                        + 1}}</a></li>
                    <li>
                        <button ng-disabled="ctrl.pagination.currentPage >= ctrl.complaints.length/ctrl.pagination.pageSize - 1"
                                ng-click="ctrl.pagination.currentPage=ctrl.pagination.currentPage+1" href="#"
                                class="next">ВПЕРЕД
                        </button>
                    </li>
                </ul>
            </div>
            <div class="page-block mobile">
                <ul>
                    <li>
                        <button ng-disabled="ctrl.pagination.currentPage == 0"
                                ng-click="ctrl.pagination.currentPage = ctrl.pagination.currentPage-1" href="#"
                                class="prev"></button>
                    </li>
                    <li ng-repeat="page in ctrl.pagination.na(ctrl.pagination.numberOfPages()) | limitTo:4"><a href="#"
                                                                                                               ng-class="ctrl.pagination.currentPage == page ? 'active-page' : 'sibling-page'"
                                                                                                               ng-click="ctrl.pagination.currentPage=page">{{page
                        + 1}}</a></li>
                    <li><a href="#" class="other-page">...</a></li>
                    <li><a href="#" class="last-page"
                           ng-click="ctrl.pagination.currentPage = ctrl.pagination.getLastPage()">{{ctrl.pagination.getLastPage()
                        + 1}}</a></li>
                    <li>
                        <button ng-disabled="ctrl.pagination.currentPage >= ctrl.complaints.length/ctrl.pagination.pageSize - 1"
                                ng-click="ctrl.pagination.currentPage=ctrl.pagination.currentPage+1" href="#"
                                class="next"></button>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div class="answer-user-block-show">
        <div class="col-md-11 col-md-offset-1 answer-user-block">
            <form ng-submit="ctrl.addComment(title, message)">
                <textarea ng-model="title" name="title" class="title">Заглавие</textarea>
                <textarea ng-model="message" name="message" class="message-testimonial"></textarea>
                <div class="buttons">
                    <button type="button" data-toggle="modal" data-target=".download-photo-modal"
                            class="add-foto">
                        ДОБАВИТЬ ИЗОБРАЖЕНИЯ
                    </button>
                    <button type="submit">ДОБАВИТЬ</button>
                    <button type="reset" class="cansel">ОТМЕНА</button>
                </div>
            </form>
        </div>
    </div>
</div>

<div class="modal fade download-photo-modal" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel"
     aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content filters">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
            <h3>Загрузка фотографии</h3>
            <p>Вы можете загрузить изображение в формате JPG, GIF или PNG.</p>
            <input type="file" id="fileInput"/>
            <!--<button class="modal-change-foto" data-toggle="modal" data-dismiss="modal" aria-hidden="true" data-target=".download-photo-modal-2">Загрузить фото</button>-->
        </div>
    </div>
</div>
<div class="modal fade download-photo-modal-2" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel"
     aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content filters">
            <form ng-submit="ctrl.saveImage()">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                <h3>Фотография на Вашей странице</h3>
                <p>Выбранная область будет показываться на Вашей странице. <br>
                    Если изображение ориентировано неправильно, фотографию можно повернуть.
                </p>
                <div class="cropArea">
                    <img-crop area-type="square" image="ctrl.myImage" result-image="ctrl.myCroppedImage"></img-crop>
                </div>
                <button type="submit">сохранить</button>
                <button type="reset" class="cansel" data-dismiss="modal">отмена</button>
            </form>
        </div>
    </div>
</div>